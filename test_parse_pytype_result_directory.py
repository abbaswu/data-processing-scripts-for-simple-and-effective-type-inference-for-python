import json
import sys

from parse_pytype_result_directory import parse

query_dict = {"pathman._impl.s3": {"S3Path": {"__eq__": ["return"], "__init__": ["return", "path"], "__repr__": ["return"], "__str__": ["return"], "__truediv__": ["return"], "abspath": ["return"], "exists": ["return"], "expanduser": ["return"], "glob": ["return"], "is_dir": ["return"], "is_file": ["return"], "join": ["return", "pathsegments"], "ls": ["return"], "mkdir": ["return"], "parts": ["return"], "remove": ["return"], "rmdir": ["return"], "stem": ["return"], "touch": ["return"], "walk": ["return"], "with_suffix": ["return"]}}, "pathman.copy": {"global": {"_download_key": ["key"], "copy": ["dest", "src"], "copy_local_s3": ["dest", "src"], "copy_s3_local": ["dest", "parallelism", "src"], "copy_s3_s3": ["dest", "src"]}}, "pathman.path": {"Path": {"__eq__": ["return"], "__fspath__": ["return"], "__init__": ["return", "path"], "__repr__": ["return"], "__str__": ["return"], "__truediv__": ["return"], "abspath": ["return"], "basename": ["return"], "dirname": ["return"], "exists": ["return"], "expanduser": ["return"], "extension": ["return"], "glob": ["return"], "is_dir": ["return"], "is_file": ["return"], "join": ["return"], "ls": ["return"], "mkdir": ["return"], "open": ["mode"], "parts": ["return"], "read_bytes": ["return"], "read_text": ["return"], "remove": ["return"], "rmdir": ["return"], "stem": ["return"], "touch": ["return"], "walk": ["return"], "with_suffix": ["return"], "write_bytes": ["return"], "write_text": ["return"]}, "global": {"determine_output_location": ["return", "abspath"]}}}

module_search_path = 'pytype/module_search_path'

pytype_pyi_directory_path = 'pytype/.pytype/pyi'

result_dict = {"pathman._impl.s3": {"S3Path": {"__eq__": {"return": ["typing.Any"]}, "__init__": {"return": ["None"], "path": []}, "__repr__": {"return": ["typing.Any"]}, "__str__": {"return": ["typing.Any"]}, "__truediv__": {"return": ["pathman._impl.s3.S3Path"]}, "abspath": {"return": ["pathman._impl.s3.S3Path"]}, "exists": {"return": ["typing.Any"]}, "expanduser": {"return": ["pathman._impl.s3.S3Path"]}, "glob": {"return": ["builtins.list[pathman._impl.s3.S3Path]"]}, "is_dir": {"return": ["typing.Any"]}, "is_file": {"return": ["typing.Any"]}, "join": {"return": ["pathman._impl.s3.S3Path"], "pathsegments": []}, "ls": {"return": ["builtins.list[pathman._impl.s3.S3Path]"]}, "mkdir": {"return": ["typing.Any"]}, "parts": {"return": []}, "remove": {"return": ["typing.Any"]}, "rmdir": {"return": ["typing.Any"]}, "stem": {"return": []}, "touch": {"return": ["typing.Any"]}, "walk": {"return": ["collections.abc.Generator[pathman._impl.s3.S3Path, typing.Any, None]"]}, "with_suffix": {"return": ["pathman._impl.s3.S3Path"]}}}, "pathman.copy": {"global": {"_download_key": {"key": []}, "copy": {"dest": [], "src": []}, "copy_local_s3": {"dest": [], "src": []}, "copy_s3_local": {"dest": [], "parallelism": [], "src": []}, "copy_s3_s3": {"dest": [], "src": []}}}, "pathman.path": {"Path": {"__eq__": {"return": []}, "__fspath__": {"return": []}, "__init__": {"return": [], "path": []}, "__repr__": {"return": []}, "__str__": {"return": []}, "__truediv__": {"return": []}, "abspath": {"return": []}, "basename": {"return": []}, "dirname": {"return": []}, "exists": {"return": []}, "expanduser": {"return": []}, "extension": {"return": []}, "glob": {"return": []}, "is_dir": {"return": []}, "is_file": {"return": []}, "join": {"return": []}, "ls": {"return": []}, "mkdir": {"return": []}, "open": {"mode": []}, "parts": {"return": []}, "read_bytes": {"return": []}, "read_text": {"return": []}, "remove": {"return": []}, "rmdir": {"return": []}, "stem": {"return": []}, "touch": {"return": []}, "walk": {"return": []}, "with_suffix": {"return": []}, "write_bytes": {"return": []}, "write_text": {"return": []}}, "global": {"determine_output_location": {"return": [], "abspath": []}}}}

assert parse(query_dict, module_search_path, pytype_pyi_directory_path) == result_dict
